"actionType": "NOTIFICATION",
            "args": {
              "frenchNotificationTemplate": {
                "smsTemplate": 
                
                "Cher ${APPLICANT_LAST_NAME},Votre demande de: Nationalité rwandaise par acquisition 
                pour cause d'adoption avec le numéro de facturation ${billId} a été soumise avec
                 succès! Frais à payer: 10,000 FRW, Payez avant: ${paymentExpiryDate} For support, call 9099",

                "emailTemplate":
                
                 "Cher ${APPLICANT_LAST_NAME},Votre demande de:
                 Nationalité rwandaise par acquisition pour cause d'adoption avec 
                 le numéro de facturation ${billId} a été soumise avec succès! 
                 Frais à payer: 10,000 FRW, Payez avant: ${paymentExpiryDate} For
                  support, call 9099",

                "notificationTitle": "Demande soumise"
              },
              "englishNotificationTemplate": {
                "smsTemplate": 
                
                "Dear ${APPLICANT_LAST_NAME}, Your application for: Rwandan nationality 
                by acquisition - adoption with billing number ${billId} was successfully submitted!
                 Fees to be paid: 10,000 RWF, Pay Before: ${paymentExpiryDate}. For support, call 9099",

                "emailTemplate": 
                
                "Dear ${APPLICANT_LAST_NAME}, Your application for: Rwandan nationality 
                by acquisition - adoption with billing number ${billId} was successfully submitted! Fees 
                to be paid: 10,000 RWF, Pay Before: ${paymentExpiryDate}. For support, call 9099",

                "notificationTitle": "Application submitted"
              },
              "kinyarwandaNotificationTemplate": {
                "smsTemplate": 
                
                "Kuri ${APPLICANT_LAST_NAME},Dosiye yawe isaba: Ubwenegihugu bw'u Rwanda 
                binyuze mu kurera ifite kode yo kwishyura ${billId} yoherejwe neza! Amafaranga yishyurwa:
                 10,000 FRW Ishyura mbere ya: ${paymentExpiryDate}. Mukeneye ubundi bufasha, mwahamagara 9099",

                "emailTemplate": 
                
                "Kuri ${APPLICANT_LAST_NAME},Dosiye yawe isaba: Ubwenegihugu bw'u Rwanda 
                binyuze mu kurera ifite kode yo kwishyura ${billId} yoherejwe neza! Amafaranga yishyurwa:
                 10,000 FRW Ishyura mbere ya: ${paymentExpiryDate}. Mukeneye ubundi bufasha, mwahamagara 9099",

                "notificationTitle": "Dosiye yoherejwe"
              }
            }


            [
              {
                "id":1,
                "startState":"NEW",
                "event":"CREATE",
                "state":"PAYMENT_PENDING",
                "endStateOne":
                {
                  "stateName":"Payment_Pending",
                  "stateCode":"PAYMENT_PENDING",
                  "breakingAction":
                  {
                    "actionType":"BILL_ID_GENERATION",
                    "args":null
                    },
                    "nonBreakingActionList":
                    [
                      {
                        "actionType":"NOTIFICATION",
                        "args":
                        {
                          "frenchNotificationTemplate":
                          {
                            "smsTemplate":"Cher ${APPLICANT_LAST_NAME}, Votre demande de: Nationalité rwandaise par acquisition pour cause d'adoption avec le numéro de facturation ${billId} a été soumise avec succès! Frais à payer: 10,000 FRW, Payez avant: ${paymentExpiryDate} For support, call 9099",
                            "emailTemplate":"Cher ${APPLICANT_LAST_NAME},Votre demande de: Nationalité rwandaise par acquisition pour cause d'adoption avec le numéro de facturation ${billId} a été soumise avec succès! Frais à payer: 10,000 FRW, Payez avant: ${paymentExpiryDate} For support, call 9099",
                            "notificationTitle":"Demande soumise"
                            },
                            "englishNotificationTemplate":
                            {
                              "smsTemplate":"Dear ${APPLICANT_LAST_NAME}, Your application for: Rwandan nationality by acquisition - adoption with billing number ${billId} was successfully submitted! Fees to be paid: 10,000 RWF, Pay Before: ${paymentExpiryDate}. For support, call 9099",
                              "emailTemplate":"Dear ${APPLICANT_LAST_NAME}, Your application for: Rwandan nationality by acquisition - adoption with billing number ${billId} was successfully submitted! Fees to be paid: 10,000 RWF, Pay Before: ${paymentExpiryDate}. For support, call 9099",
                              "notificationTitle":"Application submitted"},
                              "kinyarwandaNotificationTemplate":
                              {
                                "smsTemplate":"Kuri ${APPLICANT_LAST_NAME}, Dosiye yawe isaba: Ubwenegihugu bw'u Rwanda binyuze mu kurera ifite kode yo kwishyura ${billId} yoherejwe neza! Amafaranga yishyurwa: 10,000 FRW Ishyura mbere ya: ${paymentExpiryDate}. Mukeneye ubundi bufasha, mwahamagara 9099",
                                "emailTemplate":"Kuri ${APPLICANT_LAST_NAME}, Dosiye yawe isaba: Ubwenegihugu bw'u Rwanda binyuze mu kurera ifite kode yo kwishyura ${billId} yoherejwe neza! Amafaranga yishyurwa: 10,000 FRW Ishyura mbere ya: ${paymentExpiryDate}. Mukeneye ubundi bufasha, mwahamagara 9099",
                                "notificationTitle":"Dosiye yoherejwe"
                                }
                                }
                                }
                                ]
                                },
                                "endStateTwo":null,
                                "breakingAction":"",
                                "nonBreakingAction":""
                                }
                                ]

                              [
                                {
                                  "id":1,
                                  "startState":"ssd",
                                  "event":"ds",
                                  "endStateOne":
                                  {
                                    "stateName":"ds",
                                    "stateCode":"ds",
                                    "breakingAction":null,
                                    "nonBreakingActionList":
                                    [
                                      {
                                        "actionType":"NOTIFICATION",
                                        "args":
                                        {
                                          "frenchNotificationTemplate":
                                          {
                                            "smsTemplate":"sd",
                                            "emailTemplate":"ds",
                                            "notificationTitle":"ds"
                                            },
                                            "englishNotificationTemplate":
                                            {
                                              "smsTemplate":"dsd",
                                              "emailTemplate":"ds","notificationTitle":"ds"},"kinyarwandaNotificationTemplate":{"smsTemplate":"ds","emailTemplate":"ds","notificationTitle":"ds"}}}]}}]

                                             [
                                              {
                                                "id":1,
                                                "startState":"NEW",
                                                "event":"CREATE",
                                                "state":"PAYMENT_PENDING",
                                                "endStateOne":
                                                {
                                                  "stateName":"Payment_Pending",
                                                  "stateCode":"PAYMENT_PENDING",
                                                  "breakingAction":
                                                  {
                                                    "actionType":"BILL_ID_GENERATION",
                                                    "args":null
                                                    },
                                                    "nonBreakingActionList":[{"actionType":"NOTIFICATION","args":{"frenchNotificationTemplate":{"smsTemplate":"Cher ${APPLICANT_LAST_NAME}, Votre demande de: Nationalité rwandaise par acquisition pour cause d'adoption avec le numéro de facturation ${billId} a été soumise avec succès! Frais à payer: 10,000 FRW, Payez avant: ${paymentExpiryDate} For support, call 9099","emailTemplate":"Cher ${APPLICANT_LAST_NAME},Votre demande de: Nationalité rwandaise par acquisition pour cause d'adoption avec le numéro de facturation ${billId} a été soumise avec succès! Frais à payer: 10,000 FRW, Payez avant: ${paymentExpiryDate} For support, call 9099","notificationTitle":"Demande soumise"},"englishNotificationTemplate":{"smsTemplate":"Dear ${APPLICANT_LAST_NAME}, Your application for: Rwandan nationality by acquisition - adoption with billing number ${billId} was successfully submitted! Fees to be paid: 10,000 RWF, Pay Before: ${paymentExpiryDate}. For support, call 9099","emailTemplate":"Dear ${APPLICANT_LAST_NAME}, Your application for: Rwandan nationality by acquisition - adoption with billing number ${billId} was successfully submitted! Fees to be paid: 10,000 RWF, Pay Before: ${paymentExpiryDate}. For support, call 9099","notificationTitle":"Application submitted"},"kinyarwandaNotificationTemplate":{"smsTemplate":"Kuri ${APPLICANT_LAST_NAME}, Dosiye yawe isaba: Ubwenegihugu bw'u Rwanda binyuze mu kurera ifite kode yo kwishyura ${billId} yoherejwe neza! Amafaranga yishyurwa: 10,000 FRW Ishyura mbere ya: ${paymentExpiryDate}. Mukeneye ubundi bufasha, mwahamagara 9099","emailTemplate":"Kuri ${APPLICANT_LAST_NAME}, Dosiye yawe isaba: Ubwenegihugu bw'u Rwanda binyuze mu kurera ifite kode yo kwishyura ${billId} yoherejwe neza! Amafaranga yishyurwa: 10,000 FRW Ishyura mbere ya: ${paymentExpiryDate}. Mukeneye ubundi bufasha, mwahamagara 9099","notificationTitle":"Dosiye yoherejwe"}}}]},"endStateTwo":null,"breakingAction":"","nonBreakingAction":""}]


                                                   [
                                                    {
                                                      "id":1,
                                                      "startState":"ds",
                                                      "event":"ds",
                                                      "state":"ds",
                                                      "endStateOne":
                                                      {
                                                        "stateName":"ds",
                                                        "stateCode":"ds",
                                                        "breakingAction":
                                                        {
                                                          "actionType":"ds"
                                                          },
                                                          "nonBreakingActionList":
                                                          [
                                                            {
                                                              "actionType":"NOTIFICATION",
                                                              "args":
                                                              {
                                                                "frenchNotificationTemplate":
                                                                {
                                                                  "smsTemplate":"dsd",
                                                                  "emailTemplate":"ds",
                                                                  "notificationTitle":"ds"
                                                                  },
                                                                  "englishNotificationTemplate":
                                                                  {
                                                                    "smsTemplate":"s",
                                                                    "emailTemplate":"dsd",
                                                                    "notificationTitle":"d"
                                                                    },
                                                                    "kinyarwandaNotificationTemplate":
                                                                    {
                                                                      "smsTemplate":"ds",
                                                                      "emailTemplate":"ds",
                                                                      "notificationTitle":"sd"
                                                                      }
                                                                      }
                                                                      },
                                                                      {
                                                                        "actionType":"NOTIFICATION",
                                                                        "args":
                                                                        {
                                                                          "frenchNotificationTemplate":
                                                                          {
                                                                            "smsTemplate":"ds",
                                                                            "emailTemplate":"ds",
                                                                            "notificationTitle":"ds"
                                                                            },
                                                                            "englishNotificationTemplate":
                                                                            {
                                                                              "smsTemplate":"d",
                                                                              "emailTemplate":"ds",
                                                                              "notificationTitle":"ds"
                                                                              },
                                                                              "kinyarwandaNotificationTemplate":
                                                                              {
                                                                                "smsTemplate":"ds",
                                                                                "emailTemplate":"ds",
                                                                                "notificationTitle":"sd"
                                                                                }
                                                                                }
                                                                                }
                                                                                ]
                                                                                }
                                                                                }
                                                                                ]




                                                                                <div class="modal-footer d-flex justify-content-end">
                                    <button type="button" class="btn btn-sm btn-success me-2" data-bs-dismiss="modal" (click)="saveFormData()">Create</button>
                                    <div class="btn btn-outline-danger btn-sm" data-bs-dismiss="modal">EXIT</div>
                                    <!-- <button type="button" class="btn btn-sm btn-info" (click)="saveFormData()">Save</button> -->
                                </div>

                                saveFormData() {
    try {
      const formValue = this.devForm.value;
      const existingData: Developer[] = JSON.parse(localStorage.getItem('iremboWorkflow') || '[]');
      const newData: Developer[] = [...existingData, ...formValue.devList.map((dev: any) => {
        // Ensure breakingAction is included even if it's null or empty
        if (!dev.endStateOne.breakingAction || !dev.endStateOne.breakingAction.actionType.trim()) {
          dev.endStateOne.breakingAction = null;
        }
        return dev;
      })];
      localStorage.setItem('iremboWorkflow', JSON.stringify(newData));
      localStorage.setItem('idCounter', this.idCounter.toString());
  
      // Automatically reload the page after 10 seconds
      setTimeout(() => {
        window.location.reload();
      }, 100);
    } catch (error) {
      console.error('Error saving form data:', error);
    }
  }

    saveFormData() {
    try {
      const formValue = this.devForm.value;
      const existingData: Developer[] = JSON.parse(localStorage.getItem('iremboWorkflow') || '[]');
      const newData: Developer[] = [...existingData, ...formValue.devList.map((dev: any) => {
        // Ensure breakingAction is included even if it's null or empty
        if (!dev.endStateOne.breakingAction || !dev.endStateOne.breakingAction.actionType.trim()) {
          dev.endStateOne.breakingAction = null;
        }
        return dev;
      })];
      localStorage.setItem('iremboWorkflow', JSON.stringify(newData));
      localStorage.setItem('idCounter', this.idCounter.toString());
    } catch (error) {
      console.error('Error saving form data:', error);
    }
  }